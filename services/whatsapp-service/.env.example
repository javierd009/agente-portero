# WhatsApp Service - Environment Variables

# Service
SERVICE_NAME=whatsapp-service
PORT=8002
DEBUG=true

# Evolution API (WhatsApp Business)
EVOLUTION_API_URL=http://localhost:8080
EVOLUTION_API_KEY=your-evolution-api-key
EVOLUTION_INSTANCE=agente-portero
EVOLUTION_WEBHOOK_URL=https://your-domain.com/webhook

# Backend API
BACKEND_API_URL=http://localhost:8000
BACKEND_API_KEY=optional-api-key

# OpenAI (for NLP intent parsing)
OPENAI_API_KEY=sk-xxx
OPENAI_MODEL=gpt-4-turbo-preview

# Redis (session management & cache)
REDIS_URL=redis://localhost:6379/0
SESSION_TTL=3600

# Features
ENABLE_VISITOR_AUTHORIZATION=true
ENABLE_REMOTE_GATE_OPEN=true
ENABLE_REPORTS=true
ENABLE_LOG_QUERIES=true

# Timeouts (seconds)
DEFAULT_AUTHORIZATION_TTL=7200   # 2 hours
MAX_AUTHORIZATION_TTL=86400      # 24 hours

# --- FAST PATH: Direct ISAPI open (Hikvision Digest Auth) ---
HIK_USER=admin
HIK_PASS=your-hikvision-password
# Optional: pedestrian gate may use different password
PEDESTRIAN_HIK_PASS=your-pedestrian-password

# Device IPs (Sitnova defaults)
ACCESS_PANEL_IP=172.20.22.3
BIOMETRIC_ENTRY_IP=172.20.22.136
PEDESTRIAN_DEVICE_IP=172.20.22.1

# Latency tuning
FAST_OPEN_TIMEOUT_SECONDS=1.5
FAST_OPEN_COOLDOWN_SECONDS=4
